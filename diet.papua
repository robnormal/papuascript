// nodam.http().createServer((request, response) ->
require 'http' . createServer (\request response ->
    routeM = web.routeRequest request routes . or web.error404
    onErr  = \err ->
        if err instanceof Error
            web.showMonadErr err
            response.write 'There was a problem with your request.'
            response.end()

    routeM.run $.inert onErr { request: request, response: response }

  ) . listen 1337 '127.0.0.1'

